
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Virtual Machines · H&#8322;O</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.1">
        <meta name="author" content="Hypha Worker Co-operative">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="voicemail.html" />
    
    
    <link rel="prev" href="shortlinks.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">About This Handbook</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Hypha Worker Co-operative</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../co-operative.html">
            
                <a href="../co-operative.html">
            
                    
                    About Us
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../press.html">
            
                <a href="../press.html">
            
                    
                    Press and Public Speaking
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../look-and-feel.html">
            
                <a href="../look-and-feel.html">
            
                    
                    Look and Feel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../vision.html">
            
                <a href="../vision.html">
            
                    
                    Mission, Vision and Values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../co-operative-principles.html">
            
                <a href="../co-operative-principles.html">
            
                    
                    Co-operative Principles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../bylaws.html">
            
                <a href="../bylaws.html">
            
                    
                    Bylaws
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../coc.html">
            
                <a href="../coc.html">
            
                    
                    Code of Conduct
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../board-of-directors.html">
            
                <a href="../board-of-directors.html">
            
                    
                    Board of Directors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../member-workers.html">
            
                <a href="../member-workers.html">
            
                    
                    Member-workers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="../compensation-benefits.html">
            
                <a href="../compensation-benefits.html">
            
                    
                    Compensation and Benefits
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.9.1" data-path="../salary.html">
            
                <a href="../salary.html">
            
                    
                    Employee Salary Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Our Virtual Office</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../onboarding.html">
            
                <a href="../onboarding.html">
            
                    
                    Onboarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../coordination.html">
            
                <a href="../coordination.html">
            
                    
                    Coordination 🚧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../initiatives.html">
            
                <a href="../initiatives.html">
            
                    
                    Initiatives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../roles.html">
            
                <a href="../roles.html">
            
                    
                    Roles 🚧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../meetings.html">
            
                <a href="../meetings.html">
            
                    
                    Meetings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../working-open.html">
            
                <a href="../working-open.html">
            
                    
                    Working Open
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../conflict-transformation.html">
            
                <a href="../conflict-transformation.html">
            
                    
                    Conflict Transformation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../finance.html">
            
                <a href="../finance.html">
            
                    
                    Finance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../fiscal-sponsorship.html">
            
                <a href="../fiscal-sponsorship.html">
            
                    
                    Fiscal Sponsorship
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="../holidays.html">
            
                <a href="../holidays.html">
            
                    
                    Holidays, Time off, and Leaves
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="../pet.html">
            
                <a href="../pet.html">
            
                    
                    Pet Policy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.12" data-path="../peer-feedback.html">
            
                <a href="../peer-feedback.html">
            
                    
                    Peer Feedback
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../guides.html">
            
                <a href="../guides.html">
            
                    
                    Guides 🚧
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="calendar.html">
            
                <a href="calendar.html">
            
                    
                    Calendar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="email.html">
            
                <a href="email.html">
            
                    
                    Email
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="expense-reimbursement.html">
            
                <a href="expense-reimbursement.html">
            
                    
                    Expense Reimbursement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="hiring.md">
            
                <span>
            
                    
                    Hiring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="inactivating-membership.html">
            
                <a href="inactivating-membership.html">
            
                    
                    Inactivating Membership
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="initiatives.html">
            
                <a href="initiatives.html">
            
                    
                    Initiatives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.7" data-path="invoices.html">
            
                <a href="invoices.html">
            
                    
                    Invoices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="issue-labels.html">
            
                <a href="issue-labels.html">
            
                    
                    Issue Labels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9" data-path="meetings.html">
            
                <a href="meetings.html">
            
                    
                    Meetings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.10" data-path="payroll.html">
            
                <a href="payroll.html">
            
                    
                    Payroll
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.11" data-path="reporting-hst.html">
            
                <a href="reporting-hst.html">
            
                    
                    Reporting HST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.12" data-path="sensitive-data.html">
            
                <a href="sensitive-data.html">
            
                    
                    Sensitive Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.13" data-path="signatures.html">
            
                <a href="signatures.html">
            
                    
                    Signatures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.14" data-path="shortlinks.html">
            
                <a href="shortlinks.html">
            
                    
                    Shortlinks
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.1.15" data-path="virtual-machines.html">
            
                <a href="virtual-machines.html">
            
                    
                    Virtual Machines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.16" data-path="voicemail.html">
            
                <a href="voicemail.html">
            
                    
                    Voicemail
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.17" data-path="vpn.html">
            
                <a href="vpn.html">
            
                    
                    VPN
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../templates.html">
            
                <a href="../templates.html">
            
                    
                    Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../data.html">
            
                <a href="../data.html">
            
                    
                    How We Use Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../reading-pool.html">
            
                <a href="../reading-pool.html">
            
                    
                    Reading Pool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../glossary.html">
            
                <a href="../glossary.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Virtual Machines</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="infrastructure---virtual-machines"><a name="infrastructure---virtual-machines" class="plugin-anchor" href="#infrastructure---virtual-machines"><i class="fa fa-link" aria-hidden="true"></i></a>Infrastructure - Virtual Machines</h1>
<p>We use Proxmox to run our VMs. To access the management interface you need to SSH tunnel to <code>kvm1.hypha.coop</code> on port <code>34634</code> or connect over the VPN.</p>
<h2 id="proxmox"><a name="proxmox" class="plugin-anchor" href="#proxmox"><i class="fa fa-link" aria-hidden="true"></i></a>Proxmox</h2>
<p>Proxmox is the hypervisor that all the virtual machines run on. There are two ways of accessing the Proxmox servers management interface. An inventory of machines running on this server can be found in the <a href="https://github.com/hyphacoop/inventory-private/blob/master/inventory-kvm1.md" data-proofer-ignore target="_blank">inventory-private</a> repo.</p>
<ul>
<li><p>SSH tunnel</p>
<ol>
<li>Tunnel the web interface over SSH with <code>ssh root@kvm1.hypha.coop -p 34634 -L 8006:127.0.0.1:8006</code></li>
<li>Access the panel using <a href="https://127.0.0.1:8006" data-proofer-ignore target="_blank">https://127.0.0.1:8006</a></li>
<li>The username is root and enter the password in our shared password manager Bitwarden.</li>
</ol>
</li>
<li><p>VPN (Recommended)</p>
<ol>
<li>Connect to OpenVPN (If you do not already have access please ping someone in the infra for the OpenVPN config file.)</li>
<li>Access the panel using <a herf="https://kvm1.hypha.coop:8006" data-proofer-ignore>https://kvm1.hypha.coop:8006</a></li>
<li>The username is root and enter the password in our shared password manager Bitwarden.</li>
</ol>
</li>
</ul>
<h2 id="jump-server"><a name="jump-server" class="plugin-anchor" href="#jump-server"><i class="fa fa-link" aria-hidden="true"></i></a>Jump server</h2>
<p>To be able to ssh into the different virtual machines running on the infrastructure, authentication must be done via the <code>jump server</code>. This means you must first login to the <code>jump server</code> with your ssh key, and once there, you can use the keys on the <code>jump server</code> to connect and authenticate to the other virtual machines.</p>
<ul>
<li><p>Connecting to staging Ansible1 (Our provisioning and jump server for staging machines)
By default all members access to the production environment</p>
<ol>
<li>You&apos;ll need to ensure that your key has been added. You can do that by making a PR <a href="https://github.com/hyphacoop/configurations/tree/master/hyphacoop/ssh-public-keys" target="_blank">here</a>.</li>
<li><code>ssh sysadmin@ansible1.hypha.stg -p 8002 -i ~/.ssh/id_rsa</code> (assuming <code>~/.ssh/id_rsa</code> is your key you use to access Hypha&apos;s infra.)</li>
<li>From there you can SSH into the backend systems using their <code>.stg</code> hostnames or directly with their IP address. The passphase for <code>~/.ssh/id_rsa</code> is <a href="https://pass.hypha.coop/app/passwords/view/3adad6cf-b56c-47fd-a0cd-a845075f7622" target="_blank">here</a></li>
</ol>
</li>
<li><p>Connecting to production Ansible1 (Our provisioning and jump server for production machines)
By default only members that have a need to access have permissions to log in to the production environment</p>
<ol>
<li>You&apos;ll need to ensure that your key has been added. You can do that by making a PR <a href="https://github.com/hyphacoop/configurations/tree/master/hyphacoop/ssh-public-keys" target="_blank">here</a>.</li>
<li><code>ssh sysadmin@ansible1.hypha.prod -p 9154 -i ~/.ssh/id_rsa</code> (assuming <code>~/.ssh/id_rsa</code> is your key you use to access Hypha&apos;s infra.)</li>
<li>From there you can SSH into the backend systems using their <code>.prod</code> hostnames or directly with their IP address. The passphase for <code>~/.ssh/id_rsa</code> is <a href="https://pass.hypha.coop/app/passwords/view/3e6018fd-7ae3-4647-8ce3-c6ccb6c71800" target="_blank">here</a></li>
</ol>
</li>
</ul>
<p>Alternatively, by adding a host profile for each hostname to <code>~/.ssh/config</code>, ssh will jump through the host and connect you to the target server automatically. Example of a profile that uses the ansible&apos;s keys below.</p>
<pre><code>Host [[hostname]]
  RemoteCommand ssh %n
  HostName ansible1.hypha.prod
  User sysadmin
  Port 9154
  RequestTTY yes
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="shortlinks.html" class="navigation navigation-prev " aria-label="Previous page: Shortlinks">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="voicemail.html" class="navigation navigation-next " aria-label="Next page: Voicemail">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Virtual Machines","level":"4.1.15","depth":2,"next":{"title":"Voicemail","level":"4.1.16","depth":2,"path":"guides/voicemail.md","ref":"./guides/voicemail.md","articles":[]},"previous":{"title":"Shortlinks","level":"4.1.14","depth":2,"path":"guides/shortlinks.md","ref":"./guides/shortlinks.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchors"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"anchors":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Hypha Worker Co-operative","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"handbook.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"H&#8322;O","gitbook":"*","description":"Hypha handbook describes the vision, processes, and culture of Hypha Worker Co-operative. 🌿🍄"},"file":{"path":"guides/virtual-machines.md","mtime":"2022-12-22T18:08:50.901Z","type":"markdown"},"gitbook":{"version":"3.7.1","time":"2022-12-22T18:08:59.106Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

